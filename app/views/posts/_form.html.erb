<%= form_with(model: post) do |form| %>
        <% if post.errors.any? %>
          <div style="color: red">
            <h2><%= pluralize(post.errors.count, "error") %> prohibited this post from being saved:</h2>

            <ul>
              <% post.errors.each do |error| %>
                <li><%= error.full_message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
        <div class="W_EditorHeader">
          <div class="M_EditorHeader">
            <%= form.submit "Сохранить", class:"A_Button Black" %>
            <%= link_to profile_path(current_user.profile) do %>
              <% if current_user.profile.avatar.present? %>
                  <%= image_tag current_user.profile.avatar.url, class: "A_Avatar" %>
              <% else %>
                <div class="A_Avatar NoImage"></div>
              <% end %> 
            <% end %>
          </div>
        </div>          
        <div class="M_InputWithLabel">
          <%= form.label :title, "Название", style: "display: block; color: var(--dark_gray);", class: "A_Caption" %>
          <%= form.text_field :title, placeholder: "Название", class: "A_Heading1", style: "width: 1116px;"%>
        </div>
        <div class="SO_EditorSection">
          <div class="M_SectionName">
            <div class="Q_Icon ArrowUp"></div>
            <div class="A_Paragraph">Фольклорный паспорт</div>
            <div class="W_Captions">
              <div class="A_Caption Gray">Заполнение этих полей обязательно для любой фольклорной единицы.</div>
              <div class="A_Caption Gray">А&nbsp;еще другим исследователям так будет проще найти ваш материал (ведь все мы&nbsp;хотим быть найденными)</div>
            </div>
          </div>
          <div class="W_EditorInputs">
            <div class="W_TagsSelection" data-controller="tags">
              <div class="A_Heading3">Теги</div>
              <div class="C_TagCollection" data-tags-target="selectedTagsContainer">
                  <% ActsAsTaggableOn::Tagging.where(context: 'genre').distinct.pluck(:tag_id).each do |tag_id| %>
                    <% tag = ActsAsTaggableOn::Tag.find(tag_id) %>
                    <%= content_tag :span, tag.name, class: "A_Paragraph Antiqua A_Tag None", data: 
                    { tags_target: "selectedTag", 
                      action: "click->tags#handleTagClick", 
                      tag_id: "tag-#{tag.id}" } %>
                  <% end %>
              </div>
              <div class="O_TagsPicker">
                <div class="M_TagsSearchUnit">
                  <div class="W_TopSearchPart">
                    <div class="A_Paragraph Antiqua">Жанр</div>
                    <div class="A_SearchInput">
                      <div class="Q_Icon SearchGray Small"></div>
                      <%= tag.input type: "text", placeholder: "Я хочу найти…", class: "A_Paragraph", data: {action: "input->tags#filter", tags_target:"searchInput"} %>
                      <%= form.hidden_field :genre_list, value: post.genre_list.join(', '), data: { tags_target: "postTagsForm" } %>
                    </div>
                  </div>
                  <div class="C_TagCollection" data-tags-target="tagContainer">
                    <% ActsAsTaggableOn::Tagging.where(context: 'genre').distinct.pluck(:tag_id).each do |tag_id| %>
                      <% tag = ActsAsTaggableOn::Tag.find(tag_id) %>
                      <%= content_tag :span, tag.name, class: "A_Paragraph Antiqua A_Tag", 
                      data: { tags_target: "tag", 
                              action: "click->tags#handleTagClick", 
                              tag_id: "tag-#{tag.id}" } %>
                    <% end %>
                  </div>
                </div>
                <div class="M_TagsSearchUnit">
                  <div class="W_TopSearchPart">
                    <div class="A_Paragraph Antiqua">Тема</div>
                    <div class="A_SearchInput">
                    <div class="Q_Icon SearchGray Small"></div>
                    <%= form.text_field :genre_list, placeholder: "Я хочу найти…", value: post.genre_list.join(', '), class: "A_Paragraph"%>
                    </div>
                  </div>
                  <div class="C_TagCollection">
                    <% ActsAsTaggableOn::Tagging.where(context: 'theme').distinct.pluck(:tag_id).each do |tag_id| %>
                      <% tag = ActsAsTaggableOn::Tag.find(tag_id) %>
                      <%= content_tag :span, tag.name, class: "A_Paragraph Antiqua A_Tag" %>
                    <% end %>
                  </div>
                </div>
                <div class="M_TagsSearchUnit">
                  <div class="W_TopSearchPart">
                    <div class="A_Paragraph Antiqua">Язык, диалект</div>
                    <div class="A_SearchInput">
                    <div class="Q_Icon SearchGray Small"></div>
                    <%= form.text_field :genre_list, placeholder: "Я хочу найти…", value: post.genre_list.join(', '), class: "A_Paragraph"%>
                    </div>
                  </div>
                  <div class="C_TagCollection">
                    <% ActsAsTaggableOn::Tagging.where(context: 'language').distinct.pluck(:tag_id).each do |tag_id| %>
                      <% tag = ActsAsTaggableOn::Tag.find(tag_id) %>
                      <%= content_tag :span, tag.name, class: "A_Paragraph Antiqua A_Tag" %>
                    <% end %>
                  </div>
                </div>
                <div class="M_TagsSearchUnit">
                  <div class="W_TopSearchPart">
                    <div class="A_Paragraph Antiqua">Народность</div>
                    <div class="A_SearchInput">
                    <div class="Q_Icon SearchGray Small"></div>
                    <%= form.text_field :genre_list, placeholder: "Я хочу найти…", value: post.genre_list.join(', '), class: "A_Paragraph"%>
                    </div>
                  </div>
                  <div class="C_TagCollection">
                    <% ActsAsTaggableOn::Tagging.where(context: 'nationality').distinct.pluck(:tag_id).each do |tag_id| %>
                      <% tag = ActsAsTaggableOn::Tag.find(tag_id) %>
                      <%= content_tag :span, tag.name, class: "A_Paragraph Antiqua A_Tag" %>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--<div class="W_EditorInputs">
        </div>
        <div class="O_CustomTrixEditor">
        <p class="A_Paragraph">Луток</p>
          <%#= form.rich_text_area :text, data: { controller: "trix" }%>
        </div>-->
<% end %>